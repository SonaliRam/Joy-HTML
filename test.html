<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Category Management - Dark Theme</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <style>
      /* Dark Theme Variables */
      :root {
        --primary-bg: #121212;
        --secondary-bg: #1e1e1e;
        --text-primary: #e0e0e0;
        --text-secondary: #b0b0b0;
        --accent-purple: #bb86fc;
        --accent-teal: #03dac6;
        --glass-bg: rgba(30, 30, 30, 0.7);
        --glass-border: rgba(255, 255, 255, 0.1);
        --hover-overlay: rgba(255, 255, 255, 0.05);
        --shadow-glass: 0 4px 6px rgba(0, 0, 0, 0.1);
        --border-radius: 8px;
        --transition: all 0.2s ease;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: var(--primary-bg);
        min-height: 100vh;
        color: var(--text-primary);
        position: relative;
      }

      /* Enhanced Navbar with Gradient Buttons */
      .navbar {
        background: var(--glass-bg);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border-bottom: 1px solid var(--glass-border);
        box-shadow: var(--shadow-glass);
        padding: 1rem 2rem;
        position: sticky;
        top: 0;
        z-index: 1000;
      }

      .nav-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        max-width: 1400px;
        margin: 0 auto;
      }

      .logo {
        font-size: 1.8rem;
        font-weight: bold;
        background: linear-gradient(
          45deg,
          var(--accent-purple),
          var(--accent-teal)
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-decoration: none;
      }

      .nav-menu {
        display: flex;
        list-style: none;
        gap: 1rem;
        align-items: center;
      }

      .nav-item a,
      .logout {
        text-decoration: none;
        color: var(--text-primary);
        font-weight: 500;
        padding: 0.75rem 1.5rem;
        border-radius: var(--border-radius);
        background: linear-gradient(
          135deg,
          var(--accent-purple) 0%,
          var(--accent-teal) 100%
        );
        border: none;
        cursor: pointer;
        font-size: 14px;
        transition: var(--transition);
        position: relative;
        overflow: hidden;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .nav-item a:hover,
      .logout:hover {
        background: linear-gradient(
          135deg,
          color-mix(in srgb, var(--accent-purple) 90%, white) 0%,
          color-mix(in srgb, var(--accent-teal) 90%, white) 100%
        );
        transform: scale(1.05);
        box-shadow: 0 8px 25px rgba(187, 134, 252, 0.3);
      }

      .nav-item a.active {
        background: linear-gradient(
          135deg,
          var(--accent-teal) 0%,
          var(--accent-purple) 100%
        );
      }

      /* Top Bar */
      .top-bar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 2rem auto;
        max-width: 1400px;
        padding: 0 2rem;
      }

      .top-bar h1 {
        font-size: 2rem;
        font-weight: bold;
        text-transform: uppercase;
        color: var(--text-primary);
        margin: 0;
      }

      .top-controls {
        display: flex;
        align-items: center;
        gap: 2rem;
      }

      .add-btn {
        padding: 0.75rem 1.5rem;
        background: linear-gradient(
          135deg,
          var(--accent-purple) 0%,
          var(--accent-teal) 100%
        );
        color: white;
        border: none;
        border-radius: var(--border-radius);
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: var(--transition);
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .add-btn:hover {
        transform: translateY(-2px) scale(1.05);
        box-shadow: 0 8px 25px rgba(187, 134, 252, 0.4);
      }

      .category-count {
        font-weight: bold;
        font-size: 16px;
        color: var(--text-secondary);
        padding: 0.5rem 1rem;
        background: var(--glass-bg);
        border-radius: var(--border-radius);
        border: 1px solid var(--glass-border);
      }

      /* Glassomorphic Table */
      .table-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 2rem;
      }

      .table-wrapper {
        background: var(--glass-bg);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border: 1px solid var(--glass-border);
        border-radius: var(--border-radius);
        box-shadow: var(--shadow-glass);
        overflow: hidden;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        background: transparent;
      }

      th,
      td {
        padding: 1rem;
        text-align: left;
        border-bottom: 1px solid var(--glass-border);
      }

      th {
        background: rgba(187, 134, 252, 0.1);
        color: var(--text-primary);
        font-weight: 600;
        text-transform: uppercase;
        font-size: 0.9rem;
        letter-spacing: 0.5px;
      }

      /* Zebra Stripes */
      tbody tr:nth-child(even) {
        background: rgba(255, 255, 255, 0.02);
      }

      tbody tr:nth-child(odd) {
        background: rgba(255, 255, 255, 0.01);
      }

      tbody tr:hover {
        background: var(--hover-overlay);
        transform: translateY(-1px);
        transition: var(--transition);
      }

      td {
        color: var(--text-secondary);
      }

      .action-buttons {
        display: flex;
        gap: 0.5rem;
      }

      .action-buttons button {
        padding: 0.5rem 1rem;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 12px;
        font-weight: 500;
        transition: var(--transition);
      }

      .edit-btn {
        background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);
        color: white;
      }

      .delete-btn {
        background: linear-gradient(135deg, #f44336 0%, #da190b 100%);
        color: white;
      }

      .edit-btn:hover,
      .delete-btn:hover {
        transform: scale(1.1);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      }

      /* Sliding Modal Forms */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(0, 0, 0, 0.8);
        backdrop-filter: blur(5px);
        -webkit-backdrop-filter: blur(5px);
        z-index: 2000;
        animation: fadeIn 0.3s ease-in-out;
      }

      .modal.show {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .modal-content {
        background: rgba(30, 30, 30, 0.95);
        backdrop-filter: blur(15px);
        -webkit-backdrop-filter: blur(15px);
        border: 1px solid var(--glass-border);
        border-radius: var(--border-radius);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        width: 50%;
        min-width: 300px;
        max-width: 600px;
        max-height: 90vh;
        overflow-y: auto;
        position: relative;
        transform: translateX(-100vw);
        animation: slideInFromLeft 0.3s ease-in-out forwards;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes slideInFromLeft {
        from {
          transform: translateX(-100vw);
        }
        to {
          transform: translateX(0);
        }
      }

      @keyframes slideOutToLeft {
        from {
          transform: translateX(0);
        }
        to {
          transform: translateX(-100vw);
        }
      }

      .modal-content.closing {
        animation: slideOutToLeft 0.3s ease-in-out forwards;
      }

      .modal-header {
        padding: 1.5rem 2rem 1rem;
        border-bottom: 1px solid var(--glass-border);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .modal-header h2 {
        color: var(--text-primary);
        font-size: 1.5rem;
        margin: 0;
      }

      .close-btn {
        background: none;
        border: none;
        font-size: 24px;
        color: var(--text-secondary);
        cursor: pointer;
        padding: 0.5rem;
        border-radius: 50%;
        transition: var(--transition);
      }

      .close-btn:hover {
        background: var(--hover-overlay);
        color: var(--text-primary);
        transform: scale(1.1);
      }

      .modal-form {
        padding: 2rem;
      }

      .form-group {
        margin-bottom: 1.5rem;
      }

      .form-group label {
        display: block;
        margin-bottom: 0.5rem;
        color: var(--text-primary);
        font-weight: 500;
      }

      .required {
        color: #ff6b6b;
        font-weight: bold;
      }

      .form-group input,
      .form-group [contenteditable] {
        width: 100%;
        padding: 0.75rem;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid var(--glass-border);
        border-radius: var(--border-radius);
        color: var(--text-primary);
        font-size: 14px;
        transition: var(--transition);
      }

      .form-group input:focus,
      .form-group [contenteditable]:focus {
        outline: none;
        border-color: var(--accent-purple);
        box-shadow: 0 0 0 2px rgba(187, 134, 252, 0.2);
        background: rgba(255, 255, 255, 0.08);
      }

      .contenteditable-field {
        min-height: 100px;
        max-height: 200px;
        overflow-y: auto;
      }

      .image-preview {
        width: 100%;
        max-height: 200px;
        margin: 10px 0;
        border-radius: var(--border-radius);
        display: none;
        object-fit: cover;
      }

      .radio-group {
        display: flex;
        gap: 1rem;
        margin-top: 0.5rem;
      }

      .radio-group label {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        cursor: pointer;
      }

      .form-buttons {
        display: flex;
        gap: 1rem;
        justify-content: flex-end;
        margin-top: 2rem;
      }

      .btn-primary,
      .btn-secondary {
        padding: 0.75rem 1.5rem;
        border: none;
        border-radius: var(--border-radius);
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: var(--transition);
      }

      .btn-primary {
        background: linear-gradient(
          135deg,
          var(--accent-purple) 0%,
          var(--accent-teal) 100%
        );
        color: white;
      }

      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(187, 134, 252, 0.4);
      }

      .btn-secondary {
        background: transparent;
        color: var(--text-secondary);
        border: 1px solid var(--glass-border);
      }

      .btn-secondary:hover {
        background: var(--hover-overlay);
        color: var(--text-primary);
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .nav-menu {
          flex-direction: column;
          gap: 0.5rem;
        }

        .nav-item a,
        .logout {
          padding: 0.5rem 1rem;
          font-size: 12px;
        }

        .top-bar {
          flex-direction: column;
          gap: 1rem;
          text-align: center;
        }

        .top-controls {
          flex-direction: column;
          gap: 1rem;
        }

        .modal-content {
          width: 90%;
          min-width: unset;
          margin: 1rem;
        }

        table {
          font-size: 14px;
        }

        th,
        td {
          padding: 0.75rem 0.5rem;
        }

        .action-buttons {
          flex-direction: column;
          gap: 0.25rem;
        }
      }

      @media (max-width: 480px) {
        .navbar {
          padding: 0.5rem 1rem;
        }

        .logo {
          font-size: 1.4rem;
        }

        .top-bar h1 {
          font-size: 1.5rem;
        }

        .modal-content {
          width: 95%;
        }

        .modal-form {
          padding: 1rem;
        }
      }

      /* Fallbacks for browsers without backdrop-filter support */
      @supports not (backdrop-filter: blur(10px)) {
        .navbar {
          background: rgba(30, 30, 30, 0.95);
        }

        .table-wrapper {
          background: rgba(30, 30, 30, 0.9);
        }

        .modal-content {
          background: rgba(30, 30, 30, 0.98);
        }
      }
    </style>
  </head>
  <body>
    <nav class="navbar">
      <div class="nav-container">
        <a href="#" class="logo">AdminPanel</a>
        <ul class="nav-menu">
          <li class="nav-item">
            <a href="#" class="active"
              ><i class="fas fa-layer-group"></i> Category</a
            >
          </li>
          <li class="nav-item">
            <a href="#"><i class="fas fa-chart-bar"></i> Sub-Category</a>
          </li>
          <li class="nav-item">
            <a href="#"><i class="fas fa-box"></i> Products</a>
          </li>
          <li class="nav-item">
            <a href="#"
              ><i class="fas fa-question-circle"></i> Product Enquiry</a
            >
          </li>
          <li class="nav-item">
            <a href="#"><i class="fas fa-users"></i> Manage Users</a>
          </li>
          <li class="nav-item">
            <button class="logout" onclick="logout()">
              <i class="fas fa-sign-out-alt"></i> Logout
            </button>
          </li>
        </ul>
      </div>
    </nav>

    <div class="top-bar">
      <h1>Category Dashboard</h1>
      <div class="top-controls">
        <button class="add-btn" onclick="openAddModal()">
          <i class="fas fa-plus"></i> Add Category
        </button>
        <div class="category-count" id="categoryCount">Total Categories: 0</div>
      </div>
    </div>

    <div class="table-container">
      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Description</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="categoryTableBody">
            <!-- Sample data for demonstration -->
            <tr>
              <td class="action-buttons">
                <button
                  class="edit-btn"
                  onclick="openEditModal()"
                >
                  <i class="fas fa-edit"></i> Edit
                </button>
                <button class="delete-btn" onclick="deleteCategory()">
                  <i class="fas fa-trash"></i> Delete
                </button>
              </td>
            </tr>
            <tr>
             
              <td class="action-buttons">
                <button
                  class="edit-btn"
                  onclick="openEditModal(2, 'Clothing', 'Fashion and apparel items')"
                >
                  <i class="fas fa-edit"></i> Edit
                </button>
                <button class="delete-btn" onclick="deleteCategory(2)">
                  <i class="fas fa-trash"></i> Delete
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Add Modal -->
    <div id="addModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Add Category</h2>
          <button class="close-btn" onclick="closeAddModal()">&times;</button>
        </div>
        <form class="modal-form" id="addForm">
          <div class="form-group">
            <label><span class="required">*</span> Name:</label>
            <input
              type="text"
              id="addName"
              placeholder="Category name"
              required
            />
          </div>

          <div class="form-group">
            <label><span class="required">*</span> Description:</label>
            <div
              contenteditable="true"
              id="addDescription"
              class="contenteditable-field"
              placeholder="Category description"
            ></div>
          </div>

          <div class="form-group">
            <label><span class="required">*</span> Search Keywords:</label>
            <input
              type="text"
              id="addSearchKeywords"
              placeholder="Comma-separated keywords"
              required
            />
          </div>

          <div class="form-group">
            <label><span class="required">*</span> Image Link:</label>
            <input
              type="url"
              id="addImageLink"
              placeholder="https://example.com/image.jpg"
              required
              oninput="previewImage()"
            />
            <img id="imagePreview" class="image-preview" src="" alt="Preview" />
          </div>

          <div class="form-group">
            <label><span class="required">*</span> SEO Title:</label>
            <input
              type="text"
              id="addSeoTitle"
              placeholder="SEO optimized title"
              required
            />
          </div>

          <div class="form-group">
            <label><span class="required">*</span> SEO Description:</label>
            <input
              type="text"
              id="addSeoDescription"
              placeholder="SEO meta description"
              required
            />
          </div>

          <div class="form-group">
            <label>Publication Status:</label>
            <div class="radio-group">
              <label>
                <input type="radio" name="publishStatus" value="true" checked />
                <span>Publish</span>
              </label>
              <label>
                <input type="radio" name="publishStatus" value="false" />
                <span>Save as Draft</span>
              </label>
            </div>
          </div>

          <div class="form-buttons">
            <button
              type="button"
              class="btn-secondary"
              onclick="closeAddModal()"
            >
              Cancel
            </button>
            <button type="submit" class="btn-primary">Save Category</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Edit Modal -->
    <div id="editModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Edit Category</h2>
          <button class="close-btn" onclick="closeEditModal()">&times;</button>
        </div>
        <form class="modal-form" id="editForm">
          <input type="hidden" id="editId" />
          <div class="form-group">

            <label><span class="required">*</span> Name:</label>
            <input
              type="text"
              id="editName"
              placeholder="Category name"
              required
            />
          </div>

          <div class="form-group">
            <label><span class="required">*</span> Description:</label>
            <input
              type="text"
              id="editDescription"
              placeholder="Category description"
              required
            />
          </div>

          <div class="form-buttons">
            <button
              type="button"
              class="btn-secondary"
              onclick="closeEditModal()"
            >
              Cancel
            </button>
            <button type="submit" class="btn-primary">Update Category</button>
          </div>
        </form>
      </div>
    </div>

    <script>
      // Mock data and API simulation
      const baseUrl = "http://localhost:8080/categories";
      let categories = [
        {
          id: 1,
          name: "Electronics",
          description: "Electronic devices and accessories",
        },
        { id: 2, name: "Clothing", description: "Fashion and apparel items" },
      ];

      // Image preview functionality
      function previewImage() {
        const imageUrl = document.getElementById("addImageLink").value;
        const preview = document.getElementById("imagePreview");
        if (imageUrl.trim()) {
          preview.style.display = "block";
          preview.src = imageUrl.trim();
        } else {
          preview.style.display = "none";
        }
      }

      // Load categories on page load
      window.onload = function () {
        getAllCategories();
      };

      // Enhanced modal functions with sliding animation
      function openAddModal() {
        const modal = document.getElementById("addModal");
        const modalContent = modal.querySelector(".modal-content");

        modal.classList.add("show");
        modalContent.classList.remove("closing");
      }

      function closeAddModal() {
        const modal = document.getElementById("addModal");
        const modalContent = modal.querySelector(".modal-content");

        modalContent.classList.add("closing");

        setTimeout(() => {
          modal.classList.remove("show");
          modal.style.display = "none";
          modalContent.classList.remove("closing");
          document.getElementById("addForm").reset();
          document.getElementById("addDescription").innerHTML = "";
          document.getElementById("imagePreview").style.display = "none";
        }, 300);
      }

      function openEditModal(id, name, description) {
        const modal = document.getElementById("editModal");
        const modalContent = modal.querySelector(".modal-content");

        document.getElementById("editId").value = id;
        document.getElementById("editName").value = name;
        document.getElementById("editDescription").value = description;

        modal.classList.add("show");
        modalContent.classList.remove("closing");
      }

      function closeEditModal() {
        const modal = document.getElementById("editModal");
        const modalContent = modal.querySelector(".modal-content");

        modalContent.classList.add("closing");

        setTimeout(() => {
          modal.classList.remove("show");
          modal.style.display = "none";
          modalContent.classList.remove("closing");
          document.getElementById("editForm").reset();
        }, 300);
      }

      // Enhanced category management functions
      async function getAllCategories() {
        // Simulate API call
        try {
          // const res = await fetch(baseUrl);
          // const data = await res.json();
          const data = categories; // Using mock data

          document.getElementById(
            "categoryCount"
          ).textContent = `Total Categories: ${data.length}`;
          const tableBody = document.getElementById("categoryTableBody");
          tableBody.innerHTML = "";

          data.forEach((cat) => {
            const row = document.createElement("tr");
            row.innerHTML = `
                        <td>${cat.name}</td>
                        <td>${cat.description}</td>
                        <td class="action-buttons">
                            <button class="edit-btn" onclick="openEditModal(${cat.id}, '${cat.name}', '${cat.description}')">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="delete-btn" onclick="deleteCategory(${cat.id})">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </td>
                    `;
            tableBody.appendChild(row);
          });
        } catch (error) {
          console.error("Error fetching categories:", error);
        }
      }

      // Form submission handlers
      document
        .getElementById("addForm")
        .addEventListener("submit", async function (e) {
          e.preventDefault();

          const name = document.getElementById("addName").value.trim();
          const description = document
            .getElementById("addDescription")
            .innerHTML.trim();
          const searchKeywords = document
            .getElementById("addSearchKeywords")
            .value.trim();
          const imageLink = document
            .getElementById("addImageLink")
            .value.trim();
          const seoTitle = document.getElementById("addSeoTitle").value.trim();
          const seoDescription = document
            .getElementById("addSeoDescription")
            .value.trim();
          const publishStatus =
            document.querySelector('input[name="publishStatus"]:checked')
              .value === "true";

          try {
            // Simulate API call
            // await fetch(baseUrl, {
            //     method: "POST",
            //     headers: { "Content-Type": "application/json" },
            //     body: JSON.stringify({
            //         name, description, searchKeywords, imageLink, seoTitle, seoDescription,
            //         isPublished: publishStatus
            //     })
            // });

            // Mock data update
            const newId = Math.max(...categories.map((c) => c.id)) + 1;
            categories.push({ id: newId, name, description });

            closeAddModal();
            getAllCategories();
          } catch (error) {
            console.error("Error adding category:", error);
          }
        });

      document
        .getElementById("editForm")
        .addEventListener("submit", async function (e) {
          e.preventDefault();

          const id = parseInt(document.getElementById("editId").value);
          const name = document.getElementById("editName").value;
          const description = document.getElementById("editDescription").value;

          try {
            // Simulate API call
            // await fetch(`${baseUrl}/${id}`, {
            //     method: "PUT",
            //     headers: { "Content-Type": "application/json" },
            //     body: JSON.stringify({ name, description })
            // });

            // Mock data update
            const categoryIndex = categories.findIndex((c) => c.id === id);
            if (categoryIndex !== -1) {
              categories[categoryIndex] = {
                ...categories[categoryIndex],
                name,
                description,
              };
            }

            closeEditModal();
            getAllCategories();
          } catch (error) {
            console.error("Error updating category:", error);
          }
        });

      async function deleteCategory(id) {
        const confirmDelete = confirm(
          "Are you sure you want to delete this category?"
        );
        if (!confirmDelete) return;

        try {
          // Simulate API call
          // await fetch(`${baseUrl}/${id}`, { method: "DELETE" });

          // Mock data update
          categories = categories.filter((c) => c.id !== id);

          getAllCategories();
        } catch (error) {
          console.error("Error deleting category:", error);
        }
      }

      function logout() {
        if (confirm("Are you sure you want to logout?")) {
          // Implement logout logic
          alert("Logged out successfully!");
        }
      }

      // Close modal when clicking outside
      window.addEventListener("click", function (e) {
        const addModal = document.getElementById("addModal");
        const editModal = document.getElementById("editModal");

        if (e.target === addModal) {
          closeAddModal();
        } else if (e.target === editModal) {
          closeEditModal();
        }
      });

      // Keyboard shortcuts
      document.addEventListener("keydown", function (e) {
        if (e.key === "Escape") {
          const addModal = document.getElementById("addModal");
          const editModal = document.getElementById("editModal");

          if (addModal.classList.contains("show")) {
            closeAddModal();
          } else if (editModal.classList.contains("show")) {
            closeEditModal();
          }
        }
      });
    </script>
  </body>
</html>
